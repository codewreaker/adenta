"use strict";(self.webpackChunkrslib_website=self.webpackChunkrslib_website||[]).push([["4674"],{4582:function(e,s,n){n.r(s),n.d(s,{default:()=>a});var r=n(813),i=n(7522),l=n(6693);function o(e){let s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",span:"span",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.h1,{id:"nodejs",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#nodejs",children:"#"}),"Node.js"]}),"\n",(0,r.jsx)(s.p,{children:"In this document, you will learn how to build a Node.js library using Rslib."}),"\n",(0,r.jsxs)(s.h2,{id:"create-nodejs-project",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#create-nodejs-project",children:"#"}),"Create Node.js project"]}),"\n",(0,r.jsxs)(s.p,{children:["You can use ",(0,r.jsx)(s.code,{children:"create-rslib"})," to create a project with Rslib + Node.js. Just execute the following command:"]}),"\n","\n",(0,r.jsx)(l.SU,{command:{npm:"npm create rslib@latest",yarn:"yarn create rslib",pnpm:"pnpm create rslib@latest",bun:"bun create rslib@latest"}}),"\n",(0,r.jsxs)(s.p,{children:["Then select ",(0,r.jsx)(s.code,{children:"Node.js"}),' when prompted to "Select template".']}),"\n",(0,r.jsxs)(s.h2,{id:"use-rslib-in-an-existing-project",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#use-rslib-in-an-existing-project",children:"#"}),"Use Rslib in an existing project"]}),"\n",(0,r.jsx)(s.p,{children:"Rslib offers seamless support for Node.js projects, allowing you to build Node.js project effortlessly with minimal configuration."}),"\n",(0,r.jsxs)(s.p,{children:["For example, in ",(0,r.jsx)(s.code,{children:"rslib.config.ts"}),":"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"rslib.config.ts",children:(0,r.jsxs)(s.code,{className:"language-ts",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { defineConfig } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@rslib/core'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" default"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" defineConfig"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  lib"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ["})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    {"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      format"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'esm'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      output"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        distPath"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          root"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" './dist/esm'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    {"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      format"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'cjs'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      output"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        distPath"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          root"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" './dist/cjs'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  ]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"});"})})]})})}),"\n",(0,r.jsxs)(s.h2,{id:"target-for-nodejs",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#target-for-nodejs",children:"#"}),"Target for Node.js"]}),"\n",(0,r.jsxs)(s.p,{children:["Rslib sets ",(0,r.jsx)(s.a,{href:"/config/rsbuild/output#outputtarget",children:"target"})," to ",(0,r.jsx)(s.code,{children:'"node"'})," by default, which is different from the default target of Rsbuild."]}),"\n",(0,r.jsxs)(s.p,{children:["When target is set to ",(0,r.jsx)(s.code,{children:'"node"'}),", Rslib adjusts many configurations for Node.js. For example, ",(0,r.jsx)(s.a,{href:"/config/rsbuild/output#outputtarget",children:"output.externals"})," will exclude built-in Node.js modules, and ",(0,r.jsx)(s.a,{href:"/config/lib/shims",children:"shims"})," will add a shim for ",(0,r.jsx)(s.code,{children:"import.meta.url"})," in CJS output by default."]}),"\n",(0,r.jsxs)(s.h3,{id:"externals",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#externals",children:"#"}),"Externals"]}),"\n",(0,r.jsxs)(s.p,{children:["All Node.js ",(0,r.jsx)(s.a,{href:"https://nodejs.org/docs/latest/api/",rel:"noopener noreferrer",target:"_blank",children:"built-in modules"})," are externalized by default."]}),"\n",(0,r.jsxs)(s.h3,{id:"shims",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#shims",children:"#"}),"Shims"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"global"}),": leave it as it is, while it's recommended to use ",(0,r.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis",rel:"noopener noreferrer",target:"_blank",children:"globalThis"})," instead."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"__filename"}),": When outputting in ESM format, replace ",(0,r.jsx)(s.code,{children:"__filename"})," with the result of ",(0,r.jsx)(s.code,{children:"fileURLToPath(import.meta.url)"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"__dirname"}),": When outputting in ESM format, replace ",(0,r.jsx)(s.code,{children:"__dirname"})," with the result of ",(0,r.jsx)(s.code,{children:"dirname(fileURLToPath(import.meta.url))"}),"."]}),"\n"]}),"\n","\n","\n"]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["en%2Fguide%2Fsolution%2Fnodejs.mdx"]={toc:[{id:"create-nodejs-project",text:"Create Node.js project",depth:2},{id:"use-rslib-in-an-existing-project",text:"Use Rslib in an existing project",depth:2},{id:"target-for-nodejs",text:"Target for Node.js",depth:2},{id:"externals",text:"Externals",depth:3},{id:"shims",text:"Shims",depth:3}],title:"Node.js",headingTitle:"Node.js",frontmatter:{}}}}]);