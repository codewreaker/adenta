"use strict";(self.webpackChunkrslib_website=self.webpackChunkrslib_website||[]).push([["7187"],{2348:function(s,e,n){n.r(e),n.d(e,{default:()=>c});var i=n(813),r=n(7522);function l(s){let e={a:"a",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",span:"span",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...s.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.h1,{id:"cli",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#cli",children:"#"}),"CLI"]}),"\n",(0,i.jsxs)(e.p,{children:["Rslib comes with a lightweight CLI that includes commands such as ",(0,i.jsx)(e.a,{href:"#rslib-build",children:"rslib build"})," and ",(0,i.jsx)(e.a,{href:"#rslib-inspect",children:"rslib inspect"}),"."]}),"\n",(0,i.jsxs)(e.h2,{id:"all-commands",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#all-commands",children:"#"}),"All commands"]}),"\n",(0,i.jsx)(e.p,{children:"To view all available CLI commands, run the following command in the project directory:"}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,i.jsx)(e.code,{className:"language-bash",children:(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"npx"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" rslib"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" -h"})]})})})}),"\n",(0,i.jsx)(e.p,{children:"The output is shown below:"}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,i.jsxs)(e.code,{className:"language-bash",children:[(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"Usage:"})}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  $"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" rslib"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" <"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"comman"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"d"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" [options]"})]}),"\n",(0,i.jsx)(e.span,{className:"line"}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"Commands:"})}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  build"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"    build"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" the"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" library"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" for"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" production"})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  inspect"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"  inspect"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" the"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" Rsbuild"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" /"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" Rspack"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" configs"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" of"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" Rslib"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" projects"})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  mf-dev"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"   start"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" Rsbuild"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" dev"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" server"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" of"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" Module"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" Federation"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" format"})]})]})})}),"\n",(0,i.jsxs)(e.h2,{id:"common-flags",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#common-flags",children:"#"}),"Common flags"]}),"\n",(0,i.jsx)(e.p,{children:"Rslib CLI provides several common flags that can be used with all commands:"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"Flag"}),(0,i.jsx)(e.th,{children:"Description"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"-c, --config <config>"})}),(0,i.jsxs)(e.td,{children:["Specify the configuration file, can be a relative or absolute path, see ",(0,i.jsx)(e.a,{href:"/guide/basic/configure-rslib#specify-config-file",children:"Specify config file"})]})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"--env-dir <dir>"})}),(0,i.jsxs)(e.td,{children:["Specify the directory to load ",(0,i.jsx)(e.code,{children:".env"})," files, see ",(0,i.jsx)(e.a,{href:"https://rsbuild.rs/guide/advanced/env-vars#env-directory",rel:"noopener noreferrer",target:"_blank",children:"Rsbuild - Env directory"})]})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"--env-mode <mode>"})}),(0,i.jsxs)(e.td,{children:["Specify the env mode to load the ",(0,i.jsx)(e.code,{children:".env.[mode]"})," file, see ",(0,i.jsx)(e.a,{href:"https://rsbuild.rs/guide/advanced/env-vars#env-mode",rel:"noopener noreferrer",target:"_blank",children:"Rsbuild - Env mode"})]})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"-h, --help"})}),(0,i.jsx)(e.td,{children:"Display help for command"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"--lib <id>"})}),(0,i.jsxs)(e.td,{children:["Specify the library to run commands (repeatable, e.g. ",(0,i.jsx)(e.code,{children:"--lib esm --lib cjs"}),"), see ",(0,i.jsx)(e.a,{href:"/config/lib/id",children:"lib.id"})," to learn how to get or set the ID of the library"]})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"-r, --root <root>"})}),(0,i.jsx)(e.td,{children:"Specify the project root directory, can be an absolute path or a path relative to cwd"})]})]})]}),"\n",(0,i.jsxs)(e.h2,{id:"rslib-build",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#rslib-build",children:"#"}),"rslib build"]}),"\n",(0,i.jsxs)(e.p,{children:["The ",(0,i.jsx)(e.code,{children:"rslib build"})," command will build the outputs for production in the ",(0,i.jsx)(e.code,{children:"dist/"})," directory by default."]}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,i.jsxs)(e.code,{className:"language-bash",children:[(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"Usage:"})}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  $"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" rslib"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" build"})]}),"\n",(0,i.jsx)(e.span,{className:"line"}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"Options:"})}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  -w"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" --watch"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"            turn"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" on"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" watch"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" mode,"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" watch"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" for"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" changes"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" and"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" rebuild"})]})]})})}),"\n",(0,i.jsxs)(e.h3,{id:"environment-variables",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#environment-variables",children:"#"}),"Environment variables"]}),"\n",(0,i.jsx)(e.p,{children:"Rslib supports injecting env variables or expressions into the code during build, which is helpful for distinguishing the running environment or replacing constants."}),"\n",(0,i.jsxs)(e.p,{children:["You can see more details in ",(0,i.jsx)(e.a,{href:"https://rsbuild.rs/guide/advanced/env-vars",rel:"noopener noreferrer",target:"_blank",children:"Rsbuild - Environment variables"}),"."]}),"\n",(0,i.jsxs)(e.div,{className:"rspress-directive note",children:[(0,i.jsx)(e.div,{className:"rspress-directive-title",children:"NOTE"}),(0,i.jsx)(e.div,{className:"rspress-directive-content",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["If ",(0,i.jsx)(e.a,{href:"/config/lib/format",children:"format"})," is ",(0,i.jsx)(e.code,{children:"esm"})," or ",(0,i.jsx)(e.code,{children:"cjs"}),", ",(0,i.jsx)(e.code,{children:"process.env.NODE_ENV"})," will be preserved in the build output."]}),"\n",(0,i.jsxs)(e.li,{children:["If ",(0,i.jsx)(e.a,{href:"/config/lib/format",children:"format"})," is ",(0,i.jsx)(e.code,{children:"mf"})," or ",(0,i.jsx)(e.code,{children:"umd"}),", ",(0,i.jsx)(e.code,{children:"process.env.NODE_ENV"})," will be replaced to ensure that the output can run in the browser."]}),"\n"]})})]}),"\n",(0,i.jsxs)(e.h2,{id:"rslib-inspect",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#rslib-inspect",children:"#"}),"rslib inspect"]}),"\n",(0,i.jsxs)(e.p,{children:["The ",(0,i.jsx)(e.code,{children:"rslib inspect"})," command is used to view the Rsbuild config and Rspack config of the Rslib project."]}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,i.jsxs)(e.code,{className:"language-bash",children:[(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"Usage:"})}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  $"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" rslib"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" inspect"})]}),"\n",(0,i.jsx)(e.span,{className:"line"}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"Options:"})}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  --output"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" <"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"outpu"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"     specify"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" inspect"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" content"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" output"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" path"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (default: "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'".rsbuild"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:")"})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  --verbose"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"             show"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" full"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" function"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" definitions"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" in"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" output"})]})]})})}),"\n",(0,i.jsxs)(e.p,{children:["When you run the command ",(0,i.jsx)(e.code,{children:"npx rslib inspect"})," in the project root directory, the following files will be generated in the ",(0,i.jsx)(e.code,{children:"dist/.rsbuild"})," directory of the project:"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"rsbuild.config.mjs"}),": Represents the Rsbuild configuration used during the build."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"rspack.config.web.mjs"}),": Represents the Rspack configuration used during the build."]}),"\n"]}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,i.jsxs)(e.code,{className:"language-text",children:[(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{children:"➜ npx rslib inspect"})}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{})}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{children:"Inspect config succeed, open following files to view the content:"})}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{})}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{children:"  - Rsbuild Config: /project/dist/.rsbuild/rsbuild.config.mjs"})}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{children:"  - Rspack Config (esm): /project/dist/.rsbuild/rspack.config.esm.mjs"})})]})})}),"\n",(0,i.jsxs)(e.h3,{id:"verbose-content",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#verbose-content",children:"#"}),"Verbose content"]}),"\n",(0,i.jsxs)(e.p,{children:["By default, the inspect command omits the content of functions in the configuration object. You can add the ",(0,i.jsx)(e.code,{children:"--verbose"})," option to output the complete content of functions:"]}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,i.jsx)(e.code,{className:"language-bash",children:(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"rslib"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" inspect"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:" --verbose"})]})})})}),"\n",(0,i.jsxs)(e.h3,{id:"multiple-output-formats",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#multiple-output-formats",children:"#"}),"Multiple output formats"]}),"\n",(0,i.jsxs)(e.p,{children:["If the current project has multiple output formats, such as ESM artifact and CJS artifact simultaneously, multiple Rspack configuration files will be generated in the ",(0,i.jsx)(e.code,{children:"dist/.rsbuild"})," directory."]}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,i.jsxs)(e.code,{className:"language-text",children:[(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{children:"➜ npx rslib inspect"})}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{})}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{children:"Inspect config succeed, open following files to view the content:"})}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{})}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{children:"  - Rsbuild Config (esm): /project/dist/.rsbuild/rsbuild.config.esm.mjs"})}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{children:"  - Rsbuild Config (cjs): /project/dist/.rsbuild/rsbuild.config.cjs.mjs"})}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{children:"  - Rspack Config (esm): /project/dist/.rsbuild/rspack.config.esm.mjs"})}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{children:"  - Rspack Config (cjs): /project/dist/.rsbuild/rspack.config.cjs.mjs"})})]})})}),"\n",(0,i.jsxs)(e.h2,{id:"rslib-mf-dev",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#rslib-mf-dev",children:"#"}),"rslib mf-dev"]}),"\n",(0,i.jsxs)(e.p,{children:["The ",(0,i.jsx)(e.code,{children:"rslib mf-dev"})," command is utilized to start Rsbuild dev server for the ",(0,i.jsx)(e.a,{href:"/guide/advanced/module-federation",children:"Module Federation"})," format."]}),"\n",(0,i.jsx)(e.p,{children:"This enables you to develop and debug your mf format module within the host app."})]})}function c(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}={...(0,r.a)(),...s.components};return e?(0,i.jsx)(e,{...s,children:(0,i.jsx)(l,{...s})}):l(s)}c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["en%2Fguide%2Fbasic%2Fcli.mdx"]={toc:[{id:"all-commands",text:"All commands",depth:2},{id:"common-flags",text:"Common flags",depth:2},{id:"rslib-build",text:"rslib build",depth:2},{id:"environment-variables",text:"Environment variables",depth:3},{id:"rslib-inspect",text:"rslib inspect",depth:2},{id:"verbose-content",text:"Verbose content",depth:3},{id:"multiple-output-formats",text:"Multiple output formats",depth:3},{id:"rslib-mf-dev",text:"rslib mf-dev",depth:2}],title:"CLI",headingTitle:"CLI",frontmatter:{}}}}]);