"use strict";(self.webpackChunkrslib_website=self.webpackChunkrslib_website||[]).push([["1438"],{213:function(e,n,s){s.r(n),s.d(n,{default:()=>d});var i=s(813),r=s(7522),t=s(6693);function l(e){let n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",span:"span",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"tsup",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#tsup",children:"#"}),"tsup"]}),"\n",(0,i.jsx)(n.p,{children:"This section introduces how to migrate a project using tsup to Rslib."}),"\n",(0,i.jsxs)(n.h2,{id:"installing-dependencies",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#installing-dependencies",children:"#"}),"Installing dependencies"]}),"\n",(0,i.jsx)(n.p,{children:"First, you need to replace the npm dependencies of tsup with Rslib's dependencies."}),"\n","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Remove tsup:"}),"\n"]}),"\n",(0,i.jsx)(t.SU,{command:"remove tsup"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Install Rslib:"}),"\n"]}),"\n",(0,i.jsx)(t.SU,{command:"add @rslib/core -D"}),"\n",(0,i.jsxs)(n.h2,{id:"updating-npm-scripts",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#updating-npm-scripts",children:"#"}),"Updating npm scripts"]}),"\n",(0,i.jsx)(n.p,{children:"Next, you need to update the npm scripts in your package.json to use Rslib's CLI commands."}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"package.json",children:(0,i.jsxs)(n.code,{className:"language-diff",children:[(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"{"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:'  "scripts": {'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-deleted)"},children:'-   "build": "tsup",'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-deleted)"},children:'-   "build:watch": "tsup --watch",'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-inserted)"},children:'+   "build": "rslib build",'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-inserted)"},children:'+   "build:watch": "rslib build --watch"'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  }"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,i.jsxs)(n.h2,{id:"create-configuration-file",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#create-configuration-file",children:"#"}),"Create configuration file"]}),"\n",(0,i.jsxs)(n.p,{children:["Create a Rslib configuration file ",(0,i.jsx)(n.code,{children:"rslib.config.ts"})," in the same directory as ",(0,i.jsx)(n.code,{children:"package.json"}),", and add the following content:"]}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"rslib.config.ts",children:(0,i.jsxs)(n.code,{className:"language-ts",children:[(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" { defineConfig } "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@rslib/core'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,i.jsx)(n.span,{className:"line"}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:" default"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" defineConfig"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"({});"})]})]})})}),"\n",(0,i.jsxs)(n.h2,{id:"configuration-migration",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configuration-migration",children:"#"}),"Configuration migration"]}),"\n",(0,i.jsx)(n.p,{children:"Here is the corresponding Rslib configuration for tsup configuration:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"tsup"}),(0,i.jsx)(n.th,{children:"Rslib"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"banner"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/config/lib/banner",children:"lib.banner"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"bundle"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/config/lib/bundle",children:"lib.bundle"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"clean"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/config/rsbuild/output#outputcleandistpath",children:"output.cleanDistPath"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"define"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/config/rsbuild/source#sourcedefine",children:"source.define"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"dts"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/config/lib/dts",children:"lib.dts"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"entry"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/config/rsbuild/source#sourceentry",children:"source.entry"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"external"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.a,{href:"/config/rsbuild/output#outputexternals",children:"output.externals"})," / ",(0,i.jsx)(n.a,{href:"/config/lib/auto-external",children:"lib.autoExternal"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"format"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/config/lib/format",children:"lib.format"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"footer"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/config/lib/footer",children:"lib.footer"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"minify"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/config/rsbuild/output#outputminify",children:"output.minify"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"platform"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/config/rsbuild/output#outputtarget",children:"output.target"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"plugins"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/config/rsbuild/plugins",children:"plugins"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"sourcemap"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/config/rsbuild/output#outputsourcemap",children:"output.sourceMap"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"shims"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/config/lib/shims",children:"lib.shims"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"terserOptions"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/config/rsbuild/output#outputminify",children:"output.minify"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"tsconfig"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/config/rsbuild/source#sourcetsconfigpath",children:"source.tsconfigPath"})})]})]})]}),"\n",(0,i.jsxs)(n.h2,{id:"contents-supplement",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#contents-supplement",children:"#"}),"Contents supplement"]}),"\n",(0,i.jsx)(n.p,{children:"The current document only covers part of the migration process. If you find suitable content to add, feel free to contribute to the documentation via pull request \uD83E\uDD1D."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["The documentation for Rslib can be found in the ",(0,i.jsx)(n.a,{href:"https://github.com/web-infra-dev/rslib/tree/main/website",rel:"noopener noreferrer",target:"_blank",children:"rslib/website"})," directory."]}),"\n"]})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["en%2Fguide%2Fmigration%2Ftsup.mdx"]={toc:[{id:"installing-dependencies",text:"Installing dependencies",depth:2},{id:"updating-npm-scripts",text:"Updating npm scripts",depth:2},{id:"create-configuration-file",text:"Create configuration file",depth:2},{id:"configuration-migration",text:"Configuration migration",depth:2},{id:"contents-supplement",text:"Contents supplement",depth:2}],title:"tsup",headingTitle:"tsup",frontmatter:{}}}}]);