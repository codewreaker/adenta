"use strict";(self.webpackChunkrslib_website=self.webpackChunkrslib_website||[]).push([["323"],{3999:function(e,s,n){n.r(s),n.d(s,{default:()=>d});var r=n(813),i=n(7522),o=n(6111),a=n(7930),t=n(4734),l=n(304);function c(e){let s={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.h1,{id:"output-format",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#output-format",children:"#"}),"Output format"]}),"\n",(0,r.jsxs)(s.p,{children:["There are multiple supported output formats for the generated JavaScript files in Rslib: ",(0,r.jsx)(s.a,{href:"#esm--cjs",children:"ESM"}),", ",(0,r.jsx)(s.a,{href:"#esm--cjs",children:"CJS"}),", ",(0,r.jsx)(s.a,{href:"#umd",children:"UMD"}),", ",(0,r.jsx)(s.a,{href:"#mf",children:"MF"}),", and ",(0,r.jsx)(s.a,{href:"#iife",children:"IIFE"}),". In this chapter, we will introduce the differences between these formats and how to choose the right one for your library."]}),"\n",(0,r.jsxs)(s.h2,{id:"esm--cjs",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#esm--cjs",children:"#"}),"ESM / CJS"]}),"\n",(0,r.jsx)(s.p,{children:"Library authors need to carefully consider which module formats to support. Let's understand ESM (ECMAScript Modules) and CJS (CommonJS) and when to use them."}),"\n",(0,r.jsxs)(s.h3,{id:"what-are-esm-and-cjs",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#what-are-esm-and-cjs",children:"#"}),"What are ESM and CJS?"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"ESM"}),": ",(0,r.jsx)(o.Z,{})]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"CommonJS"}),": ",(0,r.jsx)(a.Z,{})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.h3,{id:"what-is-the-dilemma-of-esm--cjs",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#what-is-the-dilemma-of-esm--cjs",children:"#"}),"What is the dilemma of ESM / CJS"]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["The following references are from ",(0,r.jsx)(s.a,{href:"https://redfin.engineering/node-modules-at-war-why-commonjs-and-es-modules-cant-get-along-9617135eeca1",rel:"noopener noreferrer",target:"_blank",children:"Node Modules at War: Why CommonJS and ES Modules Can't Get Along"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["You can't ",(0,r.jsx)(s.code,{children:"require()"})," ESM scripts; you can only import ESM scripts, like this: ",(0,r.jsx)(s.code,{children:"import {foo} from 'foo'"})]}),"\n",(0,r.jsxs)(s.li,{children:["CJS scripts can't use static ",(0,r.jsx)(s.code,{children:"import"})," statements like the one above."]}),"\n",(0,r.jsxs)(s.li,{children:["ESM scripts can ",(0,r.jsx)(s.code,{children:"import"})," CJS scripts, but only by using the ",(0,r.jsx)(s.strong,{children:"default import"})," syntax ",(0,r.jsx)(s.code,{children:"import _ from 'lodash'"}),", not the ",(0,r.jsx)(s.strong,{children:"named import"})," syntax ",(0,r.jsx)(s.code,{children:"import {shuffle} from 'lodash'"}),", which is a hassle if the CJS script uses named exports. (Except, sometimes, unpredictibly, Node can figure out what you meant!)"]}),"\n",(0,r.jsxs)(s.li,{children:["ESM scripts can ",(0,r.jsx)(s.code,{children:"require()"})," CJS scripts, even with named exports, but it's typically not worth the trouble, because it requires even more boilerplate, and, worst of all, bundlers like Webpack and Rollup don't/won't know how to work with ESM scripts that use ",(0,r.jsx)(s.code,{children:"require()"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["CJS is the default; you have to opt-in to ESM mode. You can opt-in to ESM mode by renaming your script from ",(0,r.jsx)(s.code,{children:".js"})," to ",(0,r.jsx)(s.code,{children:".mjs"}),". Alternately, you can set ",(0,r.jsx)(s.code,{children:'"type": "module"'})," in ",(0,r.jsx)(s.code,{children:"package.json"}),", and then you can opt-out of ESM by renaming scripts from ",(0,r.jsx)(s.code,{children:".js"})," to ",(0,r.jsx)(s.code,{children:".cjs"}),". (You can even tweak just an individual subdirectory by putting a one-line ",(0,r.jsx)(s.code,{children:'{"type": "module"}'})," ",(0,r.jsx)(s.code,{children:"package.json"})," file in there.)"]}),"\n"]}),"\n",(0,r.jsxs)(s.h3,{id:"when-to-support-which-format",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#when-to-support-which-format",children:"#"}),"When to support which format?"]}),"\n",(0,r.jsx)(s.p,{children:"For different shapes of libraries, the choice of module format may vary. Here are two common scenarios:"}),"\n",(0,r.jsxs)(s.h4,{id:"ship-pure-esm-package",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#ship-pure-esm-package",children:"#"}),"ship ",(0,r.jsx)(s.a,{href:"https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c",rel:"noopener noreferrer",target:"_blank",children:"pure ESM"})," package"]}),"\n",(0,r.jsxs)(s.p,{children:["shipping only ESM is the best choice for libraries that are intended to be used in modern environments, such as browser applications or Node.js applications that support ESM. However, if the upstream library is in format of CJS, they only can import pure ESM by using dynamic import like ",(0,r.jsx)(s.code,{children:"const pureEsmLib = await import('pure-esm-lib')"}),"."]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Pros:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"ESM is the official JavaScript standard, making it more future-proof and widely supported across environments."}),"\n",(0,r.jsx)(s.li,{children:"ESM enables static analysis, which facilitates optimizations like tree-shaking to remove unused code."}),"\n",(0,r.jsx)(s.li,{children:"The syntax is cleaner and more intuitive, with import and export statements that are easier to read compared to CommonJS."}),"\n",(0,r.jsx)(s.li,{children:"ESM allows for better compatibility across both browser and server environments, making it ideal for isomorphic or universal JavaScript applications."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Cons:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"ESM modules are loaded asynchronously, which can complicate conditional imports and lazy loading in some cases."}),"\n",(0,r.jsx)(s.li,{children:"Some Node.js tools and libraries still have limited or incomplete support for ESM, requiring workarounds or additional configuration."}),"\n",(0,r.jsx)(s.li,{children:"You must explicitly include file extensions in import paths, which can be cumbersome, especially when working with TypeScript or other transpiled languages."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.h4,{id:"ship-esm--cjs-dual-package",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#ship-esm--cjs-dual-package",children:"#"}),"ship ",(0,r.jsx)(s.a,{href:"https://antfu.me/posts/publish-esm-and-cjs#compatibility",rel:"noopener noreferrer",target:"_blank",children:"ESM & CJS (dual)"})," package"]}),"\n",(0,r.jsxs)(s.p,{children:["The community is migrating to ESM, but there are still many projects using CJS. If you want to support both ESM and CJS, you can publish a dual package. For most library authors, offering dual formats is a safer and smoother way to access the best of both worlds. You could read antfu' blog post ",(0,r.jsx)(s.a,{href:"https://antfu.me/posts/publish-esm-and-cjs",rel:"noopener noreferrer",target:"_blank",children:"Publish ESM and CJS packages"})," for more details."]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Pros:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Wider compatibility: Dual packages support both modern ESM environments and legacy CJS environments, ensuring broader usage across different ecosystems."}),"\n",(0,r.jsx)(s.li,{children:"Gradual migration: Developers can gradually transition from CJS to ESM without breaking existing projects, allowing for smoother adoption of the new standard."}),"\n",(0,r.jsx)(s.li,{children:"Flexibility for consumers: Users of the package can choose which module system best fits their project, providing flexibility in different build tools and environments."}),"\n",(0,r.jsx)(s.li,{children:"Cross-runtime support: Dual packages can work in multiple runtimes, such as Node.js and browsers, without requiring additional bundling or transpilation."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Cons:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Increased complexity: Maintaining two module formats adds complexity to the build process, requiring additional configuration and testing to ensure both versions work correctly."}),"\n",(0,r.jsx)(s.li,{children:"Dual package hazard: Mixing ESM and CJS can lead to issues such as broken instanceof checks or unexpected behavior when dependencies are loaded in different formats."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.h2,{id:"umd",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#umd",children:"#"}),"UMD"]}),"\n",(0,r.jsxs)(s.h3,{id:"what-is-umd",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#what-is-umd",children:"#"}),"What is UMD?"]}),"\n",(0,r.jsx)(t.Z,{}),"\n",(0,r.jsxs)(s.h3,{id:"when-to-use-umd",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#when-to-use-umd",children:"#"}),"When to use UMD?"]}),"\n",(0,r.jsx)(s.p,{children:"If you are building a library that needs to be used in both the browser and Node.js environments, UMD is a good choice. UMD can be used as a standalone script tag in the browser or as a CommonJS module in Node.js."}),"\n",(0,r.jsxs)(s.p,{children:["A detailed answer from StackOverflow: ",(0,r.jsx)(s.a,{href:"https://stackoverflow.com/a/77284527/8063488",rel:"noopener noreferrer",target:"_blank",children:"What is the Universal Module Definition (UMD)?"})]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"However, for frontend libraries, you still offer a single file for convenience, that users can download (from a CDN) and directly embed in their web pages. This still commonly employs a UMD pattern, it's just no longer written/copied by the library author into their source code, but added automatically by the transpiler/bundler."}),"\n",(0,r.jsx)(s.p,{children:"And similarly, for backend/universal libraries that are supposed to work in\nNode.js, you still also distribute a commonjs module build via npm to support\nall the users who still use a legacy version of Node.js (and don't want/need\nto employ a transpiler themselves). This is less common nowadays for new\nlibraries, but existing ones try hard to stay backwards-compatible and not\ncause applications to break."}),"\n"]}),"\n",(0,r.jsxs)(s.h3,{id:"how-to-build-a-umd-library",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#how-to-build-a-umd-library",children:"#"}),"How to build a UMD library?"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Set the ",(0,r.jsx)(s.a,{href:"/config/lib/format",children:"lib.format"})," to ",(0,r.jsx)(s.code,{children:"umd"})," in the Rslib configuration file."]}),"\n",(0,r.jsxs)(s.li,{children:["If the library need to be exported with a name, set ",(0,r.jsx)(s.a,{href:"/config/lib/umd-name",children:"lib.umdName"})," to the name of the UMD library."]}),"\n",(0,r.jsxs)(s.li,{children:["Use ",(0,r.jsx)(s.a,{href:"/config/rsbuild/output#outputexternals",children:"output.externals"})," to specify the external dependencies that the UMD library depends on, ",(0,r.jsx)(s.a,{href:"/config/lib/auto-extension",children:"lib.autoExtension"})," is enabled by default for UMD."]}),"\n"]}),"\n",(0,r.jsxs)(s.h3,{id:"examples",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#examples",children:"#"}),"Examples"]}),"\n",(0,r.jsx)(s.p,{children:"The following Rslib config is an example to build a UMD library."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"lib.format: 'umd'"}),": instruct Rslib to build in UMD format."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"lib.umdName: 'RslibUmdExample'"}),": set the export name of the UMD library."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"output.externals.react: 'React'"}),": specify the external dependency ",(0,r.jsx)(s.code,{children:"react"})," could be accessed by ",(0,r.jsx)(s.code,{children:"window.React"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"runtime: 'classic'"}),": use the classic runtime of React to support applications that using React version under 18."]}),"\n"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"rslib.config.ts",children:(0,r.jsxs)(s.code,{className:"language-ts",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { pluginReact } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@rsbuild/plugin-react'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { defineConfig } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@rslib/core'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" default"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" defineConfig"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  lib"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ["})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    {"})}),"\n",(0,r.jsxs)(s.span,{className:"line highlighted",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      format"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'umd'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line highlighted",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      umdName"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'RslibUmdExample'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line highlighted",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      output"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line highlighted",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        externals"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line highlighted",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          react"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'React'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line highlighted",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        distPath"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          root"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" './dist/umd'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  ]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  output"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    target"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'web'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  plugins"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ["})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"    pluginReact"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      swcReactOptions"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line highlighted",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        runtime"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'classic'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    })"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  ]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"});"})})]})})}),"\n",(0,r.jsxs)(s.h2,{id:"mf",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#mf",children:"#"}),"MF"]}),"\n",(0,r.jsxs)(s.h3,{id:"what-is-mf",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#what-is-mf",children:"#"}),"What is MF?"]}),"\n",(0,r.jsxs)(s.p,{children:["MF stands for Module Federation. ",(0,r.jsx)(l.Z,{})]}),"\n",(0,r.jsxs)(s.h2,{id:"iife",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#iife",children:"#"}),"IIFE"]}),"\n","\n",(0,r.jsx)(s.p,{children:"The iife format stands for \"immediately-invoked function expression\" and is intended to be run in the browser. Wrapping your code in a function expression ensures that any variables in your code don't accidentally conflict with variables in the global scope. If your entry point has exports that you want to expose as a global in the browser, you can configure that global's name using the global name setting."}),"\n",(0,r.jsxs)(s.p,{children:["In IIFE format, ",(0,r.jsx)(s.a,{href:"https://rspack.rs/config/output#outputglobalobject",rel:"noopener noreferrer",target:"_blank",children:"output.globalObject"})," is set to ",(0,r.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis",rel:"noopener noreferrer",target:"_blank",children:"globalThis"})," by default. The ",(0,r.jsx)(s.code,{children:"import"})," statements that match ",(0,r.jsx)(s.a,{href:"/config/rsbuild/output#outputexternals",children:"externals"})," in the source code will be transformed to access properties through ",(0,r.jsx)(s.code,{children:"globalThis"}),". You can override ",(0,r.jsx)(s.a,{href:"https://rspack.rs/config/output#outputglobalobject",rel:"noopener noreferrer",target:"_blank",children:"output.globalObject"})," to any value."]}),"\n",(0,r.jsxs)(s.p,{children:["When specifying the ",(0,r.jsx)(s.code,{children:"iife"})," format, the source code and corresponding output are as follows:"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"source",children:(0,r.jsxs)(s.code,{className:"language-js",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// parent-sdk is marked as externals"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// externals: ['parent-sdk']"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { version } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'parent-sdk'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"alert"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(version);"})]})]})})}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"IIFE",children:(0,r.jsxs)(s.code,{className:"language-js",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  () "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"    'use strict'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"    const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" external_parent_sdk_namespaceObject"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" globalThis["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'parent-sdk'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"];"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"    alert"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"external_parent_sdk_namespaceObject"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".version);"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")();"})})]})})})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["en%2Fguide%2Fbasic%2Foutput-format.mdx"]={toc:[{id:"esm--cjs",text:"ESM / CJS",depth:2},{id:"what-are-esm-and-cjs",text:"What are ESM and CJS?",depth:3},{id:"what-is-the-dilemma-of-esm--cjs",text:"What is the dilemma of ESM / CJS",depth:3},{id:"when-to-support-which-format",text:"When to support which format?",depth:3},{id:"ship-pure-esm-package",text:"ship pure ESM package",depth:4},{id:"ship-esm--cjs-dual-package",text:"ship ESM & CJS (dual) package",depth:4},{id:"umd",text:"UMD",depth:2},{id:"what-is-umd",text:"What is UMD?",depth:3},{id:"when-to-use-umd",text:"When to use UMD?",depth:3},{id:"how-to-build-a-umd-library",text:"How to build a UMD library?",depth:3},{id:"examples",text:"Examples",depth:3},{id:"mf",text:"MF",depth:2},{id:"what-is-mf",text:"What is MF?",depth:3},{id:"iife",text:"IIFE",depth:2}],title:"Output format",headingTitle:"Output format",frontmatter:{}}},7930:function(e,s,n){n.d(s,{Z:()=>a});var r=n(813),i=n(7522);function o(e){let s={a:"a",p:"p",...(0,i.a)(),...e.components};return(0,r.jsxs)(s.p,{children:["CJS stands for ",(0,r.jsx)(s.a,{href:"https://nodejs.org/api/modules.html#modules-commonjs-modules",rel:"noopener noreferrer",target:"_blank",children:"CommonJS modules"}),", which is a module system used in JavaScript, particularly in server-side environments like Node.js. It was created to allow JavaScript to be used outside of the browser by providing a way to manage modules and dependencies."]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["en%2Fshared%2Fcomponents%2FCJS.mdx"]={toc:[],title:"",headingTitle:"",frontmatter:{}}},6111:function(e,s,n){n.d(s,{Z:()=>a});var r=n(813),i=n(7522);function o(e){let s={a:"a",p:"p",...(0,i.a)(),...e.components};return(0,r.jsxs)(s.p,{children:["ESM stands for ",(0,r.jsx)(s.a,{href:"https://nodejs.org/api/esm.html#modules-ecmascript-modules",rel:"noopener noreferrer",target:"_blank",children:"ECMAScript modules"}),", which is a modern module system introduced in ES2015 that allows JavaScript code to be organized into reusable, self-contained modules. ESM is now the standard for both ",(0,r.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules",rel:"noopener noreferrer",target:"_blank",children:"browser"})," and ",(0,r.jsx)(s.a,{href:"https://nodejs.org/api/esm.html",rel:"noopener noreferrer",target:"_blank",children:"Node.js"})," environments, replacing older module systems like ",(0,r.jsx)(s.a,{href:"https://nodejs.org/api/modules.html",rel:"noopener noreferrer",target:"_blank",children:"CommonJS (CJS)"})," and ",(0,r.jsx)(s.a,{href:"https://requirejs.org/docs/whyamd.html",rel:"noopener noreferrer",target:"_blank",children:"AMD"}),"."]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["en%2Fshared%2Fcomponents%2FESM.mdx"]={toc:[],title:"",headingTitle:"",frontmatter:{}}},304:function(e,s,n){n.d(s,{Z:()=>a});var r=n(813),i=n(7522);function o(e){let s={a:"a",p:"p",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"Module Federation is an architectural pattern for JavaScript application decomposition (similar to microservices on the server-side), allowing you to share code and resources between multiple JavaScript applications (or micro-frontends)."}),"\n",(0,r.jsxs)(s.p,{children:["See ",(0,r.jsx)(s.a,{href:"https://rsbuild.rs/guide/advanced/module-federation",rel:"noopener noreferrer",target:"_blank",children:"Module Federation"})," for more details."]})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["en%2Fshared%2Fcomponents%2FMF.mdx"]={toc:[],title:"",headingTitle:"",frontmatter:{}}},4734:function(e,s,n){n.d(s,{Z:()=>a});var r=n(813),i=n(7522);function o(e){let s={a:"a",p:"p",...(0,i.a)(),...e.components};return(0,r.jsxs)(s.p,{children:["UMD stands for ",(0,r.jsx)(s.a,{href:"https://github.com/umdjs/umd",rel:"noopener noreferrer",target:"_blank",children:"Universal Module Definition"}),", a pattern for writing JavaScript modules that can work universally across different environments, such as both the browser and Node.js. Its primary goal is to ensure compatibility with the most popular module systems, including AMD (Asynchronous Module Definition), CommonJS (CJS), and browser globals."]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["en%2Fshared%2Fcomponents%2FUMD.mdx"]={toc:[],title:"",headingTitle:"",frontmatter:{}}}}]);