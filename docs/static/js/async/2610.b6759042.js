"use strict";(self.webpackChunkrslib_website=self.webpackChunkrslib_website||[]).push([["2610"],{5105:function(e,n,i){i.r(n),i.d(n,{default:()=>a});var r=i(813),s=i(7522),t=i(6693);function l(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"declaration-files",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#declaration-files",children:"#"}),"Declaration files"]}),"\n",(0,r.jsxs)(n.p,{children:["This chapter introduces what ",(0,r.jsx)(n.a,{href:"https://www.typescriptlang.org/docs/handbook/declaration-files/introduction.html",rel:"noopener noreferrer",target:"_blank",children:"TypeScript Declaration Files"})," are and how to generate declaration files in Rslib."]}),"\n",(0,r.jsxs)(n.h2,{id:"what-is-declaration-files",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#what-is-declaration-files",children:"#"}),"What is declaration files"]}),"\n",(0,r.jsxs)(n.p,{children:["TypeScript Declaration Files provide type information for JavaScript code. Declaration files typically have a ",(0,r.jsx)(n.code,{children:".d.ts"})," extension. They allow the TypeScript compiler to understand the type structure of JavaScript code, enabling features like:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type Checking"}),": Provide type information for JavaScript code, helping developers catch potential type errors at compile time."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Code Completion"}),": Enhance code editor features like autocomplete and code navigation."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Documentation Generation"}),": Generate documentation for JavaScript code, providing better developer experience."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"IDE Support"}),": Improve the developer experience in IDEs like Visual Studio Code, WebStorm, and others."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Library Consumption"}),": Make it easier for users to use and understand your library."]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"what-are-bundle-declaration-files-and-bundleless-declaration-files",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#what-are-bundle-declaration-files-and-bundleless-declaration-files",children:"#"}),"What are bundle declaration files and bundleless declaration files"]}),"\n",(0,r.jsxs)(n.h3,{id:"bundle-declaration-files",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#bundle-declaration-files",children:"#"}),"Bundle declaration files"]}),"\n",(0,r.jsx)(n.p,{children:"Bundle declaration files involves bundling multiple TypeScript declaration files into a single declaration file."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Pros:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Simplified Management"}),": Simplifies the management and referencing of type files."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Easy Distribution"}),": Reduces the number of files users need to handle when using the library."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Cons:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Complex Generation"}),": Generating and maintaining a single bundle file can become complex in large projects."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Debugging Challenges"}),": Debugging type issues may not be as intuitive as with separate files."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"bundleless-declaration-files",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#bundleless-declaration-files",children:"#"}),"Bundleless declaration files"]}),"\n",(0,r.jsxs)(n.p,{children:["Bundleless declaration files involves generating a separate declaration file for each module in the library, just like ",(0,r.jsx)(n.code,{children:"tsc"})," does."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Pros:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Modular"}),": Each module has its own type definitions, making maintenance and debugging easier."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Flexibility"}),": Suitable for large projects, avoiding the complexity of a single file."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Cons:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multiple Files"}),": Users may need to handle multiple declaration files when using the library."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Complex Management"}),": May require additional configuration to correctly reference all files."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"how-to-generate-declaration-files-in-rslib",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#how-to-generate-declaration-files-in-rslib",children:"#"}),"How to generate declaration files in Rslib"]}),"\n",(0,r.jsxs)(n.p,{children:["Rslib defaults to generating bundleless declaration files, which using ",(0,r.jsx)(n.a,{href:"https://github.com/microsoft/TypeScript/wiki/Using-the-Compiler-API",rel:"noopener noreferrer",target:"_blank",children:"TypeScript Compiler API"})," and bundle declaration files is also supported by ",(0,r.jsx)(n.a,{href:"https://api-extractor.com/",rel:"noopener noreferrer",target:"_blank",children:"API Extractor"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"If you want to generate bundleless declaration files, you can:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Set ",(0,r.jsx)(n.code,{children:"dts: true"})," or ",(0,r.jsx)(n.code,{children:"dts: { bundle: false }"})," in the Rslib configuration file."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If you want to generate bundle declaration files, you can:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Install ",(0,r.jsx)(n.code,{children:"@microsoft/api-extractor"})," as ",(0,r.jsx)(n.code,{children:"devDependencies"}),", which is the underlying tool used for bundling declaration files."]}),"\n"]}),"\n","\n",(0,r.jsx)(t.SU,{command:"add @microsoft/api-extractor -D"}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["Set ",(0,r.jsx)(n.code,{children:"dts: { bundle: true }"})," in the Rslib configuration file."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["It should be noted that during the generation of declaration files, Rslib will automatically enforce some configuration options in ",(0,r.jsx)(n.code,{children:"tsconfig.json"})," to ensure that the ",(0,r.jsx)(n.a,{href:"https://github.com/microsoft/TypeScript/wiki/Using-the-Compiler-API",rel:"noopener noreferrer",target:"_blank",children:"TypeScript Compiler API"})," generates only declaration files."]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-json",children:[(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"{"})}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:'  "compilerOptions"'}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:'    "noEmit"'}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" false"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:'    "declaration"'}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" true"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:'    "emitDeclarationOnly"'}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" true"})]}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  }"})}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,r.jsx)(n.p,{children:"The priority from highest to lowest of final output directory of declaration files:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The configuration option ",(0,r.jsx)(n.a,{href:"/config/lib/dts#dtsdistpath",children:"dts.distPath"})]}),"\n",(0,r.jsxs)(n.li,{children:["The configuration option ",(0,r.jsx)(n.code,{children:"declarationDir"})," in ",(0,r.jsx)(n.code,{children:"tsconfig.json"})]}),"\n",(0,r.jsxs)(n.li,{children:["The configuration option ",(0,r.jsx)(n.a,{href:"/config/rsbuild/output#outputdistpath",children:"output.distPath.root"})]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"related-configuration-of-declaration-files",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#related-configuration-of-declaration-files",children:"#"}),"Related configuration of declaration files"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Configuration item"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/config/lib/dts#dtsbundle",children:"dts.bundle"})}),(0,r.jsx)(n.td,{children:"Whether to bundle the declaration files."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/config/lib/dts#dtsdistpath",children:"dts.distPath"})}),(0,r.jsx)(n.td,{children:"The output directory of declaration files."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/config/lib/dts#dtsbuild",children:"dts.build"})}),(0,r.jsx)(n.td,{children:"Whether to generate declaration files with building the project references."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/config/lib/dts#dtsabortonerror",children:"dts.abortOnError"})}),(0,r.jsx)(n.td,{children:"Whether to abort the build process when an error occurs during declaration files generation."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/config/lib/dts#dtsautoextension",children:"dts.autoExtension"})}),(0,r.jsxs)(n.td,{children:["Whether to automatically set the declaration file extension based on the ",(0,r.jsx)(n.a,{href:"/config/lib/format",children:"format"})," option."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/config/lib/banner#bannerdts",children:"banner.dts"})}),(0,r.jsx)(n.td,{children:"Inject content into the top of each declaration output file."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/config/lib/footer#footerdts",children:"footer.dts"})}),(0,r.jsx)(n.td,{children:"Inject content into the bottom of each declaration file."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/config/lib/redirect#redirectdtspath",children:"redirect.dts.path"})}),(0,r.jsx)(n.td,{children:"Whether to automatically redirect the import paths of TypeScript declaration output files."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/config/lib/redirect#redirectdtsextension",children:"redirect.dts.extension"})}),(0,r.jsx)(n.td,{children:"Whether to automatically redirect the file extension to import paths based on the TypeScript declaration output files."})]})]})]})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["en%2Fguide%2Fadvanced%2Fdts.mdx"]={toc:[{id:"what-is-declaration-files",text:"What is declaration files",depth:2},{id:"what-are-bundle-declaration-files-and-bundleless-declaration-files",text:"What are bundle declaration files and bundleless declaration files",depth:2},{id:"bundle-declaration-files",text:"Bundle declaration files",depth:3},{id:"bundleless-declaration-files",text:"Bundleless declaration files",depth:3},{id:"how-to-generate-declaration-files-in-rslib",text:"How to generate declaration files in Rslib",depth:2},{id:"related-configuration-of-declaration-files",text:"Related configuration of declaration files",depth:2}],title:"Declaration files",headingTitle:"Declaration files",frontmatter:{}}}}]);