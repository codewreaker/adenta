<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Output format - Rslib</title>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TKDED32K0X"></script>
<link href="/static/css/styles.3dcb6831.css" rel="stylesheet">
<link href="/static/font/open-sans.3d9ea938.woff2" rel="preload" as="font" crossorigin>
<script defer src="/static/js/styles.92944b3a.js"></script>
<script defer src="/static/js/lib-react.157bf4aa.js"></script>
<script defer src="/static/js/lib-router.be6da523.js"></script>
<script defer src="/static/js/4736.8222b1c4.js"></script>
<script defer src="/static/js/index.468277d6.js"></script>
<meta http equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Rspress v2.0.0-beta.21">
<meta property="og:image" content="https://assets.rspack.rs/rslib/rslib-og-image.png">
<meta property="og:url" content="https://israelprempeh.com">
<meta property="og:type" content="website">
<meta property="og:title" content="Rslib">
<meta property="og:description" content="The Rsbuild-based library development tool">
<meta property="twitter:site" content="@rspack_dev">
<meta property="twitter:card" content="summary_large_image">
<link rel="icon" href="https://assets.rspack.rs/rslib/rslib-logo-192x192.png">
<script>{;const saved = localStorage.getItem('rspress-theme-appearance');const preferDark = window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = !saved || saved === 'auto' ? preferDark : saved === 'dark';document.documentElement.classList.toggle('dark', isDark);document.documentElement.classList.toggle('rp-dark', isDark);document.documentElement.style.colorScheme = isDark ? 'dark' : 'light';}</script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-TKDED32K0X');</script>
<meta name="description" content="Rslib is a library development tool that leverages the well-designed configurations and plugins of Rsbuild."></head>
<body>
<div id="root"><link rel="preload" as="image" href="https://assets.rspack.rs/rslib/rslib-logo-192x192.png"/><div class="navContainer_d18b1 rspress-nav rp-px-6  sticky_ddfa7"><div class="container_e4235 rp-flex rp-justify-between rp-items-center rp-h-full"><div class="root-nhoLZk"><div class="wrapper-u2FzAf" aria-describedby="«R6d»"><svg width="20" height="20" fill="none"><title>close</title><path d="M2.5 5H5V2.5H2.5V5zM5 11.25H2.5v-2.5H5v2.5zm12.5 0H15v-2.5h2.5v2.5zm-8.75 0h2.5v-2.5h-2.5v2.5zM5 17.5H2.5V15H5v2.5zm10 0h2.5V15H15v2.5zm-3.75 0h-2.5V15h2.5v2.5zM17.5 5H15V2.5h2.5V5zM8.75 5h2.5V2.5h-2.5V5z" fill="currentColor"></path></svg></div></div><div class="navBarTitle_c5f07"><a href="/" class="link_a7cea rp-flex rp-items-center rp-w-full rp-h-full rp-text-base rp-font-semibold rp-transition-opacity rp-duration-300 hover:rp-opacity-60"><div class="rp-mr-1 rp-min-w-8"><img src="https://assets.rspack.rs/rslib/rslib-logo-192x192.png" alt="logo" id="logo" class="rspress-logo"/></div><span>Rslib</span></a></div><div class="rp-flex rp-flex-1 rp-justify-end rp-items-center"><div class="rightNav_a2fea"><div class="rp-flex sm:rp-flex-1 rp-items-center sm:rp-pl-4 sm:rp-pr-2"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="rspress-nav-menu rp-flex rp-justify-around rp-items-center rp-text-sm rp-font-bold rp-h-14"><a href="/guide/start/" class="link_a7cea "><div class="rspress-nav-menu-item singleItem_c1154 activeItem_a28b5 rspress-nav-menu-item-active rp-text-sm rp-font-medium rp-mx-0.5 rp-px-3 rp-py-2 rp-flex rp-items-center">Guide</div></a><a href="/config/" class="link_a7cea "><div class="rspress-nav-menu-item singleItem_c1154  rp-text-sm rp-font-medium rp-mx-0.5 rp-px-3 rp-py-2 rp-flex rp-items-center">Config</div></a><a href="/blog/" class="link_a7cea "><div class="rspress-nav-menu-item singleItem_c1154  rp-text-sm rp-font-medium rp-mx-0.5 rp-px-3 rp-py-2 rp-flex rp-items-center">Blog</div></a></div><div class="rp-flex rp-items-center rp-justify-center rp-flex-row"><div class="rp-mx-2"><div class="md:rp-mr-2 rspress-nav-appearance"><div class="rp-p-1 rp-border rp-border-solid rp-border-gray-300 rp-text-gray-400 rp-cursor-pointer rp-rounded-md hover:rp-border-gray-600 hover:rp-text-gray-600 dark:hover:rp-border-gray-200 dark:hover:rp-text-gray-200 rp-transition-all rp-duration-300 rp-w-7 rp-h-7"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" class="dark:rp-hidden" width="18" height="18" fill="currentColor"><path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6m0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4M12 4c-.6 0-1-.4-1-1V1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1M12 24c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1M5.6 6.6c-.3 0-.5-.1-.7-.3L3.5 4.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.1.2-.4.3-.7.3M19.8 20.8c-.3 0-.5-.1-.7-.3l-1.4-1.4c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3M3 13H1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1M23 13h-2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1M4.2 20.8c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.4.3-.7.3M18.4 6.6c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.5.3-.7.3"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" class="rp-hidden dark:rp-block" width="18" height="18" fill="currentColor"><path d="M12.1 22h-.9c-5.5-.5-9.5-5.4-9-10.9.4-4.8 4.2-8.6 9-9 .4 0 .8.2 1 .5s.2.8-.1 1.1c-2 2.7-1.4 6.4 1.3 8.4 2.1 1.6 5 1.6 7.1 0 .3-.2.7-.3 1.1-.1.3.2.5.6.5 1-.2 2.7-1.5 5.1-3.6 6.8-1.9 1.4-4.1 2.2-6.4 2.2M9.3 4.4c-2.9 1-5 3.6-5.2 6.8-.4 4.4 2.8 8.3 7.2 8.7 2.1.2 4.2-.4 5.8-1.8 1.1-.9 1.9-2.1 2.4-3.4-2.5.9-5.3.5-7.5-1.1-2.8-2.2-3.9-5.9-2.7-9.2"></path></svg></div></div></div><div class="social-links menu-item_e90a6 rp-flex rp-items-center rp-justify-center rp-relative"><div class="rp-flex rp-items-center rp-justify-center rp-h-full rp-gap-x-4 rp-transition-colors rp-duration-300 md:rp-mr-2"><a href="https://github.com/web-infra-dev/rslib" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_a4ad0"><div><svg xmlns="http://www.w3.org/2000/svg" width="100%" viewBox="0 0 24 24"><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12c0 5.303 3.438 9.8 8.205 11.385c.6.113.82-.258.82-.577c0-.285-.01-1.04-.015-2.04c-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729c1.205.084 1.838 1.236 1.838 1.236c1.07 1.835 2.809 1.305 3.495.998c.108-.776.417-1.305.76-1.605c-2.665-.3-5.466-1.332-5.466-5.93c0-1.31.465-2.38 1.235-3.22c-.135-.303-.54-1.523.105-3.176c0 0 1.005-.322 3.3 1.23c.96-.267 1.98-.399 3-.405c1.02.006 2.04.138 3 .405c2.28-1.552 3.285-1.23 3.285-1.23c.645 1.653.24 2.873.12 3.176c.765.84 1.23 1.91 1.23 3.22c0 4.61-2.805 5.625-5.475 5.92c.42.36.81 1.096.81 2.22c0 1.606-.015 2.896-.015 3.286c0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></div></div></a><a href="https://twitter.com/rspack_dev" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_a4ad0"><div><svg xmlns="http://www.w3.org/2000/svg" width="100%" viewBox="0 0 24 24"><path fill="currentColor" d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584l-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"/></svg></div></div></a><a href="https://discord.gg/XsaKEEk4mW" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_a4ad0"><div><svg xmlns="http://www.w3.org/2000/svg" width="100%" viewBox="0 0 24 24"><path fill="currentColor" d="M20.317 4.37a19.8 19.8 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.3 18.3 0 0 0-5.487 0a13 13 0 0 0-.617-1.25a.08.08 0 0 0-.079-.037A19.7 19.7 0 0 0 3.677 4.37a.1.1 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.08.08 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.08.08 0 0 0 .084-.028a14 14 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13 13 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10 10 0 0 0 .372-.292a.07.07 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.07.07 0 0 1 .078.01q.181.149.373.292a.077.077 0 0 1-.006.127a12.3 12.3 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.08.08 0 0 0 .084.028a19.8 19.8 0 0 0 6.002-3.03a.08.08 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.06.06 0 0 0-.031-.03M8.02 15.33c-1.182 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418m7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418"/></svg></div></div></a></div></div></div></div><div class="mobileNavMenu_e7045"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button><div class="navScreen_ec30c  rspress-nav-screen" id="navScreen"><div class="container_c935d"><div class="navMenu_b887b"><div class="navMenuItem_e7978 rp-w-full"><a href="/guide/start/" class="link_a7cea "><div class="rspress-nav-menu-item singleItem_c1154 activeItem_a28b5 rspress-nav-menu-item-active rp-text-sm rp-font-medium rp-mx-0.5 rp-px-3 rp-py-2 rp-flex rp-items-center">Guide</div></a></div><div class="navMenuItem_e7978 rp-w-full"><a href="/config/" class="link_a7cea "><div class="rspress-nav-menu-item singleItem_c1154  rp-text-sm rp-font-medium rp-mx-0.5 rp-px-3 rp-py-2 rp-flex rp-items-center">Config</div></a></div><div class="navMenuItem_e7978 rp-w-full"><a href="/blog/" class="link_a7cea "><div class="rspress-nav-menu-item singleItem_c1154  rp-text-sm rp-font-medium rp-mx-0.5 rp-px-3 rp-py-2 rp-flex rp-items-center">Blog</div></a></div></div><div class="rp-flex rp-items-center rp-justify-center rp-flex-col rp-gap-2"><div class="rp-mt-2 navAppearance_bf893 rp-flex rp-justify-center"></div><div class="social-links menu-item_e90a6 rp-flex rp-items-center rp-justify-center rp-relative"><div class="rp-flex rp-items-center rp-justify-center rp-h-full rp-gap-x-4 rp-transition-colors rp-duration-300 md:rp-mr-2"><a href="https://github.com/web-infra-dev/rslib" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_a4ad0"><div><svg xmlns="http://www.w3.org/2000/svg" width="100%" viewBox="0 0 24 24"><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12c0 5.303 3.438 9.8 8.205 11.385c.6.113.82-.258.82-.577c0-.285-.01-1.04-.015-2.04c-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729c1.205.084 1.838 1.236 1.838 1.236c1.07 1.835 2.809 1.305 3.495.998c.108-.776.417-1.305.76-1.605c-2.665-.3-5.466-1.332-5.466-5.93c0-1.31.465-2.38 1.235-3.22c-.135-.303-.54-1.523.105-3.176c0 0 1.005-.322 3.3 1.23c.96-.267 1.98-.399 3-.405c1.02.006 2.04.138 3 .405c2.28-1.552 3.285-1.23 3.285-1.23c.645 1.653.24 2.873.12 3.176c.765.84 1.23 1.91 1.23 3.22c0 4.61-2.805 5.625-5.475 5.92c.42.36.81 1.096.81 2.22c0 1.606-.015 2.896-.015 3.286c0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></div></div></a><a href="https://twitter.com/rspack_dev" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_a4ad0"><div><svg xmlns="http://www.w3.org/2000/svg" width="100%" viewBox="0 0 24 24"><path fill="currentColor" d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584l-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"/></svg></div></div></a><a href="https://discord.gg/XsaKEEk4mW" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_a4ad0"><div><svg xmlns="http://www.w3.org/2000/svg" width="100%" viewBox="0 0 24 24"><path fill="currentColor" d="M20.317 4.37a19.8 19.8 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.3 18.3 0 0 0-5.487 0a13 13 0 0 0-.617-1.25a.08.08 0 0 0-.079-.037A19.7 19.7 0 0 0 3.677 4.37a.1.1 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.08.08 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.08.08 0 0 0 .084-.028a14 14 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13 13 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10 10 0 0 0 .372-.292a.07.07 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.07.07 0 0 1 .078.01q.181.149.373.292a.077.077 0 0 1-.006.127a12.3 12.3 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.08.08 0 0 0 .084.028a19.8 19.8 0 0 0 6.002-3.03a.08.08 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.06.06 0 0 0-.031-.03M8.02 15.33c-1.182 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418m7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418"/></svg></div></div></a></div></div></div></div></div><button aria-label="mobile hamburger" class=" rspress-mobile-hamburger navHamburger_ac64c rp-text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="currentColor"><circle cx="8" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="24" cy="16" r="2" fill="currentColor"></circle></svg></button></div></div></div></div><section><div class="docLayout_af141 rp-pt-0"><aside class="sidebar_dd719 rspress-sidebar "><div class="navTitleMask_fb17c"><div class="navBarTitle_c5f07"><a href="/" class="link_a7cea rp-flex rp-items-center rp-w-full rp-h-full rp-text-base rp-font-semibold rp-transition-opacity rp-duration-300 hover:rp-opacity-60"><div class="rp-mr-1 rp-min-w-8"><img src="https://assets.rspack.rs/rslib/rslib-logo-192x192.png" alt="logo" id="logo" class="rspress-logo"/></div><span>Rslib</span></a></div></div><div class="rspress-scrollbar sidebarContent_da296"><nav class="rp-pb-2"><section class="rspress-sidebar-section rp-mt-0.5 rp-block" style="margin-left:0"><div class="rspress-sidebar-collapse rp-flex rp-justify-between rp-items-center menuItem_ac22e" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="rp-py-2 rp-px-3 rp-text-sm rp-font-medium rp-flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="rp-flex rp-items-center rp-justify-center" style="font-size:14px">Getting Started</span></h2><div class="collapseContainer_d6e4e rp-p-2 rp-rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="rp-transition-all rp-duration-300 rp-ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group rp-transition-opacity rp-duration-500 rp-ease-in-out" style="opacity:1;margin-left:12px"><div class="rspress-sidebar-item"><a href="/guide/start/" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Introduction</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/start/quick-start" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Quick start</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/start/glossary" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Glossary</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/start/npm-packages" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Packages</span></div></a></div></div></div></section><section class="rspress-sidebar-section rp-mt-0.5 rp-block" style="margin-left:0"><div class="rspress-sidebar-collapse rp-flex rp-justify-between rp-items-center menuItem_ac22e" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="rp-py-2 rp-px-3 rp-text-sm rp-font-medium rp-flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="rp-flex rp-items-center rp-justify-center" style="font-size:14px">Solution</span></h2><div class="collapseContainer_d6e4e rp-p-2 rp-rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="rp-transition-all rp-duration-300 rp-ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group rp-transition-opacity rp-duration-500 rp-ease-in-out" style="opacity:1;margin-left:12px"><div class="rspress-sidebar-item"><a href="/guide/solution/nodejs" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Node.js</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/solution/react" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>React</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/solution/vue" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Vue</span></div></a></div></div></div></section><section class="rspress-sidebar-section rp-mt-0.5 rp-block" style="margin-left:0"><div class="rspress-sidebar-collapse rp-flex rp-justify-between rp-items-center menuItem_ac22e" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="rp-py-2 rp-px-3 rp-text-sm rp-font-medium rp-flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="rp-flex rp-items-center rp-justify-center" style="font-size:14px">Basic</span></h2><div class="collapseContainer_d6e4e rp-p-2 rp-rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="rp-transition-all rp-duration-300 rp-ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group rp-transition-opacity rp-duration-500 rp-ease-in-out" style="opacity:1;margin-left:12px"><div class="rspress-sidebar-item"><a href="/guide/basic/cli" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>CLI</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/basic/configure-rslib" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Configure Rslib</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/basic/typescript" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Use TypeScript</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/basic/output-format" class="link_a7cea menuLink_bb039"><div class="menuItemActive_de63c rspress-sidebar-item-active rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Output format</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/basic/output-structure" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Output structure</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/basic/upgrade-rslib" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Upgrade Rslib</span></div></a></div></div></div></section><section class="rspress-sidebar-section rp-mt-0.5 rp-block" style="margin-left:0"><div class="rspress-sidebar-collapse rp-flex rp-justify-between rp-items-center menuItem_ac22e" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="rp-py-2 rp-px-3 rp-text-sm rp-font-medium rp-flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="rp-flex rp-items-center rp-justify-center" style="font-size:14px">Advanced</span></h2><div class="collapseContainer_d6e4e rp-p-2 rp-rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="rp-transition-all rp-duration-300 rp-ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group rp-transition-opacity rp-duration-500 rp-ease-in-out" style="opacity:1;margin-left:12px"><div class="rspress-sidebar-item"><a href="/guide/advanced/third-party-deps" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Handle third-party dependencies</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/advanced/output-compatibility" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Output compatibility</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/advanced/dts" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Declaration files</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/advanced/static-assets" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Import static assets</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/advanced/svgr-files" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Import SVGR</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/advanced/json-files" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Import JSON files</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/advanced/module-federation" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Module Federation</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/advanced/storybook" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Use Storybook</span></div></a></div></div></div></section><section class="rspress-sidebar-section rp-mt-0.5 rp-block" style="margin-left:0"><div class="rspress-sidebar-collapse rp-flex rp-justify-between rp-items-center menuItem_ac22e" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="rp-py-2 rp-px-3 rp-text-sm rp-font-medium rp-flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="rp-flex rp-items-center rp-justify-center" style="font-size:14px">Migration</span></h2><div class="collapseContainer_d6e4e rp-p-2 rp-rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="rp-transition-all rp-duration-300 rp-ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group rp-transition-opacity rp-duration-500 rp-ease-in-out" style="opacity:1;margin-left:12px"><div class="rspress-sidebar-item"><a href="/guide/migration/modernjs-module" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Modern.js Module</span></div></a></div><div class="rspress-sidebar-item"><a href="/guide/migration/tsup" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>tsup</span></div></a></div></div></div></section><section class="rspress-sidebar-section rp-mt-0.5 rp-block" style="margin-left:0"><div class="rspress-sidebar-collapse rp-flex rp-justify-between rp-items-center menuItem_ac22e" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="rp-py-2 rp-px-3 rp-text-sm rp-font-medium rp-flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="rp-flex rp-items-center rp-justify-center" style="font-size:14px">FAQ</span></h2><div class="collapseContainer_d6e4e rp-p-2 rp-rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="rp-transition-all rp-duration-300 rp-ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group rp-transition-opacity rp-duration-500 rp-ease-in-out" style="opacity:1;margin-left:12px"><div class="rspress-sidebar-item"><a href="/guide/faq/features" class="link_a7cea menuLink_bb039"><div class="menuItem_ac22e rp-mt-0.5 rp-py-2 rp-px-3 rp-font-medium rp-flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>Features FAQ</span></div></a></div></div></div></section></nav></div></aside><div class="rp-flex-1 rp-relative rp-min-w-0"><div class="rspress-sidebar-menu-container no-toc"><div class="rspress-sidebar-menu"><button type="button" class="rp-flex rp-items-center rp-justify-center rp-mr-auto"><div class="rp-text-md rp-mr-2"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M4 6h24v2H4zm0 18h24v2H4zm0-12h24v2H4zm0 6h24v2H4z"></path></svg></div><span class="rp-text-sm">Menu</span></button></div></div><div class="content_ff766 rspress-doc-container rp-flex"><div class="rp-flex-1 rp-overflow-x-auto"><div class="rspress-doc"><!--$--><h1 id="output-format" class="rspress-doc-title rp-text-3xl rp-mb-10 rp-leading-10 rp-tracking-tight title_fb7eb"><a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#output-format">#</a>Output format</h1>
<p class="rp-my-4 rp-leading-7">There are multiple supported output formats for the generated JavaScript files in Rslib: <a href="#esm--cjs" class="link_a7cea  link_a9ef4 inline-link_f855c">ESM</a>, <a href="#esm--cjs" class="link_a7cea  link_a9ef4 inline-link_f855c">CJS</a>, <a href="#umd" class="link_a7cea  link_a9ef4 inline-link_f855c">UMD</a>, <a href="#mf" class="link_a7cea  link_a9ef4 inline-link_f855c">MF</a>, and <a href="#iife" class="link_a7cea  link_a9ef4 inline-link_f855c">IIFE</a>. In this chapter, we will introduce the differences between these formats and how to choose the right one for your library.</p>
<h2 id="esm--cjs" class="rspress-doc-outline rp-mt-12 rp-mb-6 rp-pt-8 rp-text-2xl rp-tracking-tight rp-border-t rp-border-divider-light title_fb7eb"><a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#esm--cjs">#</a>ESM / CJS</h2>
<p class="rp-my-4 rp-leading-7">Library authors need to carefully consider which module formats to support. Let&#x27;s understand ESM (ECMAScript Modules) and CJS (CommonJS) and when to use them.</p>
<h3 id="what-are-esm-and-cjs" class="rspress-doc-outline rp-mt-10 rp-mb-2 rp-leading-7 rp-text-xl title_fb7eb"><a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#what-are-esm-and-cjs">#</a>What are ESM and CJS?</h3>
<ul class="rp-list-disc rp-pl-5 rp-my-4 rp-leading-7">
<li class="[&amp;:not(:first-child)]:rp-mt-2">
<p class="rp-my-4 rp-leading-7"><strong class="rp-font-semibold">ESM</strong>: <p class="rp-my-4 rp-leading-7">ESM stands for <a href="https://nodejs.org/api/esm.html#modules-ecmascript-modules" rel="noopener noreferrer" target="_blank" class="link_a7cea  link_a9ef4 inline-link_f855c">ECMAScript modules</a>, which is a modern module system introduced in ES2015 that allows JavaScript code to be organized into reusable, self-contained modules. ESM is now the standard for both <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules" rel="noopener noreferrer" target="_blank" class="link_a7cea  link_a9ef4 inline-link_f855c">browser</a> and <a href="https://nodejs.org/api/esm.html" rel="noopener noreferrer" target="_blank" class="link_a7cea  link_a9ef4 inline-link_f855c">Node.js</a> environments, replacing older module systems like <a href="https://nodejs.org/api/modules.html" rel="noopener noreferrer" target="_blank" class="link_a7cea  link_a9ef4 inline-link_f855c">CommonJS (CJS)</a> and <a href="https://requirejs.org/docs/whyamd.html" rel="noopener noreferrer" target="_blank" class="link_a7cea  link_a9ef4 inline-link_f855c">AMD</a>.</p></p>
</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2">
<p class="rp-my-4 rp-leading-7"><strong class="rp-font-semibold">CommonJS</strong>: <p class="rp-my-4 rp-leading-7">CJS stands for <a href="https://nodejs.org/api/modules.html#modules-commonjs-modules" rel="noopener noreferrer" target="_blank" class="link_a7cea  link_a9ef4 inline-link_f855c">CommonJS modules</a>, which is a module system used in JavaScript, particularly in server-side environments like Node.js. It was created to allow JavaScript to be used outside of the browser by providing a way to manage modules and dependencies.</p></p>
</li>
</ul>
<h3 id="what-is-the-dilemma-of-esm--cjs" class="rspress-doc-outline rp-mt-10 rp-mb-2 rp-leading-7 rp-text-xl title_fb7eb"><a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#what-is-the-dilemma-of-esm--cjs">#</a>What is the dilemma of ESM / CJS</h3>
<blockquote class="rp-border-l-2 rp-border-solid rp-border-divider rp-pl-4 rp-my-6 rp-transition-colors rp-duration-500 blockquote_f1063">
<p class="rp-my-4 rp-leading-7">The following references are from <a href="https://redfin.engineering/node-modules-at-war-why-commonjs-and-es-modules-cant-get-along-9617135eeca1" rel="noopener noreferrer" target="_blank" class="link_a7cea  link_a9ef4 inline-link_f855c">Node Modules at War: Why CommonJS and ES Modules Can&#x27;t Get Along</a>.</p>
</blockquote>
<ol class="rp-list-decimal rp-pl-5 rp-my-4 rp-leading-7">
<li class="[&amp;:not(:first-child)]:rp-mt-2">You can&#x27;t <code>require()</code> ESM scripts; you can only import ESM scripts, like this: <code>import {foo} from &#x27;foo&#x27;</code></li>
<li class="[&amp;:not(:first-child)]:rp-mt-2">CJS scripts can&#x27;t use static <code>import</code> statements like the one above.</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2">ESM scripts can <code>import</code> CJS scripts, but only by using the <strong class="rp-font-semibold">default import</strong> syntax <code>import _ from &#x27;lodash&#x27;</code>, not the <strong class="rp-font-semibold">named import</strong> syntax <code>import {shuffle} from &#x27;lodash&#x27;</code>, which is a hassle if the CJS script uses named exports. (Except, sometimes, unpredictibly, Node can figure out what you meant!)</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2">ESM scripts can <code>require()</code> CJS scripts, even with named exports, but it&#x27;s typically not worth the trouble, because it requires even more boilerplate, and, worst of all, bundlers like Webpack and Rollup don&#x27;t/won&#x27;t know how to work with ESM scripts that use <code>require()</code>.</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2">CJS is the default; you have to opt-in to ESM mode. You can opt-in to ESM mode by renaming your script from <code>.js</code> to <code>.mjs</code>. Alternately, you can set <code>&quot;type&quot;: &quot;module&quot;</code> in <code>package.json</code>, and then you can opt-out of ESM by renaming scripts from <code>.js</code> to <code>.cjs</code>. (You can even tweak just an individual subdirectory by putting a one-line <code>{&quot;type&quot;: &quot;module&quot;}</code> <code>package.json</code> file in there.)</li>
</ol>
<h3 id="when-to-support-which-format" class="rspress-doc-outline rp-mt-10 rp-mb-2 rp-leading-7 rp-text-xl title_fb7eb"><a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#when-to-support-which-format">#</a>When to support which format?</h3>
<p class="rp-my-4 rp-leading-7">For different shapes of libraries, the choice of module format may vary. Here are two common scenarios:</p>
<h4 id="ship-pure-esm-package" class="rspress-doc-outline rp-mt-8 rp-leading-6 rp-text-lg title_fb7eb"><a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#ship-pure-esm-package">#</a>ship <a href="https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c" rel="noopener noreferrer" target="_blank" class="link_a7cea  link_a9ef4 inline-link_f855c">pure ESM</a> package</h4>
<p class="rp-my-4 rp-leading-7">shipping only ESM is the best choice for libraries that are intended to be used in modern environments, such as browser applications or Node.js applications that support ESM. However, if the upstream library is in format of CJS, they only can import pure ESM by using dynamic import like <code>const pureEsmLib = await import(&#x27;pure-esm-lib&#x27;)</code>.</p>
<ul class="rp-list-disc rp-pl-5 rp-my-4 rp-leading-7">
<li class="[&amp;:not(:first-child)]:rp-mt-2"><strong class="rp-font-semibold">Pros:</strong>
<ul class="rp-list-disc rp-pl-5 rp-my-4 rp-leading-7">
<li class="[&amp;:not(:first-child)]:rp-mt-2">ESM is the official JavaScript standard, making it more future-proof and widely supported across environments.</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2">ESM enables static analysis, which facilitates optimizations like tree-shaking to remove unused code.</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2">The syntax is cleaner and more intuitive, with import and export statements that are easier to read compared to CommonJS.</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2">ESM allows for better compatibility across both browser and server environments, making it ideal for isomorphic or universal JavaScript applications.</li>
</ul>
</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2"><strong class="rp-font-semibold">Cons:</strong>
<ul class="rp-list-disc rp-pl-5 rp-my-4 rp-leading-7">
<li class="[&amp;:not(:first-child)]:rp-mt-2">ESM modules are loaded asynchronously, which can complicate conditional imports and lazy loading in some cases.</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2">Some Node.js tools and libraries still have limited or incomplete support for ESM, requiring workarounds or additional configuration.</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2">You must explicitly include file extensions in import paths, which can be cumbersome, especially when working with TypeScript or other transpiled languages.</li>
</ul>
</li>
</ul>
<h4 id="ship-esm--cjs-dual-package" class="rspress-doc-outline rp-mt-8 rp-leading-6 rp-text-lg title_fb7eb"><a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#ship-esm--cjs-dual-package">#</a>ship <a href="https://antfu.me/posts/publish-esm-and-cjs#compatibility" rel="noopener noreferrer" target="_blank" class="link_a7cea  link_a9ef4 inline-link_f855c">ESM &amp; CJS (dual)</a> package</h4>
<p class="rp-my-4 rp-leading-7">The community is migrating to ESM, but there are still many projects using CJS. If you want to support both ESM and CJS, you can publish a dual package. For most library authors, offering dual formats is a safer and smoother way to access the best of both worlds. You could read antfu&#x27; blog post <a href="https://antfu.me/posts/publish-esm-and-cjs" rel="noopener noreferrer" target="_blank" class="link_a7cea  link_a9ef4 inline-link_f855c">Publish ESM and CJS packages</a> for more details.</p>
<ul class="rp-list-disc rp-pl-5 rp-my-4 rp-leading-7">
<li class="[&amp;:not(:first-child)]:rp-mt-2">
<p class="rp-my-4 rp-leading-7"><strong class="rp-font-semibold">Pros:</strong></p>
<ul class="rp-list-disc rp-pl-5 rp-my-4 rp-leading-7">
<li class="[&amp;:not(:first-child)]:rp-mt-2">Wider compatibility: Dual packages support both modern ESM environments and legacy CJS environments, ensuring broader usage across different ecosystems.</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2">Gradual migration: Developers can gradually transition from CJS to ESM without breaking existing projects, allowing for smoother adoption of the new standard.</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2">Flexibility for consumers: Users of the package can choose which module system best fits their project, providing flexibility in different build tools and environments.</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2">Cross-runtime support: Dual packages can work in multiple runtimes, such as Node.js and browsers, without requiring additional bundling or transpilation.</li>
</ul>
</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2">
<p class="rp-my-4 rp-leading-7"><strong class="rp-font-semibold">Cons:</strong></p>
<ul class="rp-list-disc rp-pl-5 rp-my-4 rp-leading-7">
<li class="[&amp;:not(:first-child)]:rp-mt-2">Increased complexity: Maintaining two module formats adds complexity to the build process, requiring additional configuration and testing to ensure both versions work correctly.</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2">Dual package hazard: Mixing ESM and CJS can lead to issues such as broken instanceof checks or unexpected behavior when dependencies are loaded in different formats.</li>
</ul>
</li>
</ul>
<h2 id="umd" class="rspress-doc-outline rp-mt-12 rp-mb-6 rp-pt-8 rp-text-2xl rp-tracking-tight rp-border-t rp-border-divider-light title_fb7eb"><a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#umd">#</a>UMD</h2>
<h3 id="what-is-umd" class="rspress-doc-outline rp-mt-10 rp-mb-2 rp-leading-7 rp-text-xl title_fb7eb"><a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#what-is-umd">#</a>What is UMD?</h3>
<p class="rp-my-4 rp-leading-7">UMD stands for <a href="https://github.com/umdjs/umd" rel="noopener noreferrer" target="_blank" class="link_a7cea  link_a9ef4 inline-link_f855c">Universal Module Definition</a>, a pattern for writing JavaScript modules that can work universally across different environments, such as both the browser and Node.js. Its primary goal is to ensure compatibility with the most popular module systems, including AMD (Asynchronous Module Definition), CommonJS (CJS), and browser globals.</p>
<h3 id="when-to-use-umd" class="rspress-doc-outline rp-mt-10 rp-mb-2 rp-leading-7 rp-text-xl title_fb7eb"><a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#when-to-use-umd">#</a>When to use UMD?</h3>
<p class="rp-my-4 rp-leading-7">If you are building a library that needs to be used in both the browser and Node.js environments, UMD is a good choice. UMD can be used as a standalone script tag in the browser or as a CommonJS module in Node.js.</p>
<p class="rp-my-4 rp-leading-7">A detailed answer from StackOverflow: <a href="https://stackoverflow.com/a/77284527/8063488" rel="noopener noreferrer" target="_blank" class="link_a7cea  link_a9ef4 inline-link_f855c">What is the Universal Module Definition (UMD)?</a></p>
<blockquote class="rp-border-l-2 rp-border-solid rp-border-divider rp-pl-4 rp-my-6 rp-transition-colors rp-duration-500 blockquote_f1063">
<p class="rp-my-4 rp-leading-7">However, for frontend libraries, you still offer a single file for convenience, that users can download (from a CDN) and directly embed in their web pages. This still commonly employs a UMD pattern, it&#x27;s just no longer written/copied by the library author into their source code, but added automatically by the transpiler/bundler.</p>
<p class="rp-my-4 rp-leading-7">And similarly, for backend/universal libraries that are supposed to work in
Node.js, you still also distribute a commonjs module build via npm to support
all the users who still use a legacy version of Node.js (and don&#x27;t want/need
to employ a transpiler themselves). This is less common nowadays for new
libraries, but existing ones try hard to stay backwards-compatible and not
cause applications to break.</p>
</blockquote>
<h3 id="how-to-build-a-umd-library" class="rspress-doc-outline rp-mt-10 rp-mb-2 rp-leading-7 rp-text-xl title_fb7eb"><a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#how-to-build-a-umd-library">#</a>How to build a UMD library?</h3>
<ul class="rp-list-disc rp-pl-5 rp-my-4 rp-leading-7">
<li class="[&amp;:not(:first-child)]:rp-mt-2">Set the <a href="/config/lib/format" class="link_a7cea  link_a9ef4 inline-link_f855c">lib.format</a> to <code>umd</code> in the Rslib configuration file.</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2">If the library need to be exported with a name, set <a href="/config/lib/umd-name" class="link_a7cea  link_a9ef4 inline-link_f855c">lib.umdName</a> to the name of the UMD library.</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2">Use <a href="/config/rsbuild/output#outputexternals" class="link_a7cea  link_a9ef4 inline-link_f855c">output.externals</a> to specify the external dependencies that the UMD library depends on, <a href="/config/lib/auto-extension" class="link_a7cea  link_a9ef4 inline-link_f855c">lib.autoExtension</a> is enabled by default for UMD.</li>
</ul>
<h3 id="examples" class="rspress-doc-outline rp-mt-10 rp-mb-2 rp-leading-7 rp-text-xl title_fb7eb"><a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#examples">#</a>Examples</h3>
<p class="rp-my-4 rp-leading-7">The following Rslib config is an example to build a UMD library.</p>
<ul class="rp-list-disc rp-pl-5 rp-my-4 rp-leading-7">
<li class="[&amp;:not(:first-child)]:rp-mt-2"><code>lib.format: &#x27;umd&#x27;</code>: instruct Rslib to build in UMD format.</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2"><code>lib.umdName: &#x27;RslibUmdExample&#x27;</code>: set the export name of the UMD library.</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2"><code>output.externals.react: &#x27;React&#x27;</code>: specify the external dependency <code>react</code> could be accessed by <code>window.React</code>.</li>
<li class="[&amp;:not(:first-child)]:rp-mt-2"><code>runtime: &#x27;classic&#x27;</code>: use the classic runtime of React to support applications that using React version under 18.</li>
</ul>
<div class="language-ts"><div class="rspress-code-title">rslib.config.ts</div><div class="rspress-code-content rspress-scrollbar"><div><pre class="shiki css-variables has-highlighted" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0"><code class="language-ts"><span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { pluginReact } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;@rsbuild/plugin-react&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { defineConfig } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;@rslib/core&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">export</span><span style="color:var(--shiki-token-keyword)"> default</span><span style="color:var(--shiki-token-function)"> defineConfig</span><span style="color:var(--shiki-foreground)">({</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  lib</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> [</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    {</span></span>
<span class="line highlighted"><span style="color:var(--shiki-foreground)">      format</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-string-expression)"> &#x27;umd&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line highlighted"><span style="color:var(--shiki-foreground)">      umdName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-string-expression)"> &#x27;RslibUmdExample&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line highlighted"><span style="color:var(--shiki-foreground)">      output</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line highlighted"><span style="color:var(--shiki-foreground)">        externals</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line highlighted"><span style="color:var(--shiki-foreground)">          react</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-string-expression)"> &#x27;React&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line highlighted"><span style="color:var(--shiki-foreground)">        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        distPath</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">          root</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-string-expression)"> &#x27;./dist/umd&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">      }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  ]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  output</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    target</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-string-expression)"> &#x27;web&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  plugins</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> [</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    pluginReact</span><span style="color:var(--shiki-foreground)">({</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">      swcReactOptions</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line highlighted"><span style="color:var(--shiki-foreground)">        runtime</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-string-expression)"> &#x27;classic&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">      }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">    })</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  ]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">});</span></span></code></pre></div><div class="code-button-group_fb445"><button class="" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<h2 id="mf" class="rspress-doc-outline rp-mt-12 rp-mb-6 rp-pt-8 rp-text-2xl rp-tracking-tight rp-border-t rp-border-divider-light title_fb7eb"><a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#mf">#</a>MF</h2>
<h3 id="what-is-mf" class="rspress-doc-outline rp-mt-10 rp-mb-2 rp-leading-7 rp-text-xl title_fb7eb"><a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#what-is-mf">#</a>What is MF?</h3>
<p class="rp-my-4 rp-leading-7">MF stands for Module Federation. <p class="rp-my-4 rp-leading-7">Module Federation is an architectural pattern for JavaScript application decomposition (similar to microservices on the server-side), allowing you to share code and resources between multiple JavaScript applications (or micro-frontends).</p>
<p class="rp-my-4 rp-leading-7">See <a href="https://rsbuild.rs/guide/advanced/module-federation" rel="noopener noreferrer" target="_blank" class="link_a7cea  link_a9ef4 inline-link_f855c">Module Federation</a> for more details.</p></p>
<h2 id="iife" class="rspress-doc-outline rp-mt-12 rp-mb-6 rp-pt-8 rp-text-2xl rp-tracking-tight rp-border-t rp-border-divider-light title_fb7eb"><a class="link_a7cea header-anchor link_a9ef4 inline-link_f855c" aria-hidden="true" href="#iife">#</a>IIFE</h2>
<!-- -->
<p class="rp-my-4 rp-leading-7">The iife format stands for &quot;immediately-invoked function expression&quot; and is intended to be run in the browser. Wrapping your code in a function expression ensures that any variables in your code don&#x27;t accidentally conflict with variables in the global scope. If your entry point has exports that you want to expose as a global in the browser, you can configure that global&#x27;s name using the global name setting.</p>
<p class="rp-my-4 rp-leading-7">In IIFE format, <a href="https://rspack.rs/config/output#outputglobalobject" rel="noopener noreferrer" target="_blank" class="link_a7cea  link_a9ef4 inline-link_f855c">output.globalObject</a> is set to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis" rel="noopener noreferrer" target="_blank" class="link_a7cea  link_a9ef4 inline-link_f855c">globalThis</a> by default. The <code>import</code> statements that match <a href="/config/rsbuild/output#outputexternals" class="link_a7cea  link_a9ef4 inline-link_f855c">externals</a> in the source code will be transformed to access properties through <code>globalThis</code>. You can override <a href="https://rspack.rs/config/output#outputglobalobject" rel="noopener noreferrer" target="_blank" class="link_a7cea  link_a9ef4 inline-link_f855c">output.globalObject</a> to any value.</p>
<p class="rp-my-4 rp-leading-7">When specifying the <code>iife</code> format, the source code and corresponding output are as follows:</p>
<div class="language-js"><div class="rspress-code-title">source</div><div class="rspress-code-content rspress-scrollbar"><div><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0"><code class="language-js"><span class="line"><span style="color:var(--shiki-token-comment)">// parent-sdk is marked as externals</span></span>
<span class="line"><span style="color:var(--shiki-token-comment)">// externals: [&#x27;parent-sdk&#x27;]</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-foreground)"> { version } </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-token-string-expression)"> &#x27;parent-sdk&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">alert</span><span style="color:var(--shiki-foreground)">(version);</span></span></code></pre></div><div class="code-button-group_fb445"><button class="" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div>
<div class="language-js"><div class="rspress-code-title">IIFE</div><div class="rspress-code-content rspress-scrollbar"><div><pre class="shiki css-variables" style="background-color:var(--shiki-background);color:var(--shiki-foreground)" tabindex="0"><code class="language-js"><span class="line"><span style="color:var(--shiki-foreground)">(</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  () </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-foreground)"> {</span></span>
<span class="line"><span style="color:var(--shiki-token-string-expression)">    &#x27;use strict&#x27;</span><span style="color:var(--shiki-foreground)">;</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword)">    const</span><span style="color:var(--shiki-token-constant)"> external_parent_sdk_namespaceObject</span><span style="color:var(--shiki-token-keyword)"> =</span><span style="color:var(--shiki-foreground)"> globalThis[</span><span style="color:var(--shiki-token-string-expression)">&#x27;parent-sdk&#x27;</span><span style="color:var(--shiki-foreground)">];</span></span>
<span class="line"><span style="color:var(--shiki-token-function)">    alert</span><span style="color:var(--shiki-foreground)">(</span><span style="color:var(--shiki-token-constant)">external_parent_sdk_namespaceObject</span><span style="color:var(--shiki-foreground)">.version);</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">  }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--shiki-foreground)">)();</span></span></code></pre></div><div class="code-button-group_fb445"><button class="" title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_fb89b"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_ccd3d"><path fill="currentColor" d="M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"></path></svg></button><button class="code-copy-button_c5089" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_ef942"><path fill="currentColor" d="M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_d5ec0"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"></path></svg></button></div></div></div><!--/$--></div><div class="rspress-doc-footer"><footer class="rp-mt-8"><div class="xs:rp-flex rp-pb-5 rp-px-2 rp-justify-end rp-items-center"></div><div class="rp-flex rp-flex-col"><a href="https://github.com/web-infra-dev/rslib/tree/main/website/docs/en/guide/basic/output-format.mdx" target="_blank" class="editLink_e1cfa">📝 Edit this page on GitHub</a></div><div class="rp-flex rp-flex-col sm:rp-flex-row sm:rp-justify-around rp-gap-4 rp-pt-6"><div class="prev_c92d1 rp-flex rp-flex-col"><a href="/guide/basic/typescript" class="link_a7cea pager-link_e0d2d"><span class="desc_dcc01">Previous Page</span><span class="title_a3acb">Use TypeScript</span></a></div><div class="next_c11be rp-flex rp-flex-col"><a href="/guide/basic/output-structure" class="link_a7cea pager-link_e0d2d next_ad355"><span class="desc_dcc01">Next Page</span><span class="title_a3acb">Output structure</span></a></div></div></footer></div></div><div class="aside-container_bc5fa"></div></div></div></div></section></div>
<div id="search-container"></div>
</body>
</html>
